================================================================================
ğŸ¤– CODE REVIEW AGENT - REUSABLE WORKFLOW SETUP GUIDE
================================================================================

Created: December 10, 2025
Version: 1.0
Status: âœ… Ready to Deploy

================================================================================
ğŸ“‹ WHAT IS THIS?
================================================================================

A reusable GitHub Actions workflow that:
  âœ… Automatically reviews code on pull requests
  âœ… Posts detailed comments on changed files
  âœ… Works across ANY repository
  âœ… Supports Java, Python, JavaScript, and more
  âœ… Can be called from baccarat_simulator, your-project, or ANY repo

Think of it as a "shared code review service" that multiple teams can use!

================================================================================
ğŸ¯ HOW IT WORKS
================================================================================

Step 1: PR Created in ANY repo
Step 2: GitHub Actions triggers automatically
Step 3: Calls the CODE REVIEW AGENT from pr-review-agent repo
Step 4: Agent analyzes the changed code
Step 5: Agent posts review comments on the PR
Step 6: Check passes/fails based on findings
Step 7: Developers can see feedback and fix issues

Timeline: ~30-60 seconds from PR creation to review posted

================================================================================
ğŸš€ QUICK START (3 STEPS)
================================================================================

STEP 1: Add to baccarat_simulator
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

In your baccarat_simulator repo, create:
  .github/workflows/code-review.yml

Copy this content:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
name: Code Review Agent

on:
  pull_request:
    types: [opened, synchronize, reopened]

jobs:
  code-review:
    uses: bsimulator/pr-review-agent/.github/workflows/code-review-agent.yml@main
    with:
      language: 'java'
      severity: 'warning'
    secrets:
      GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€


STEP 2: Commit and Push
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

$ cd baccarat_simulator
$ git add .github/workflows/code-review.yml
$ git commit -m "ci: add automated code review agent"
$ git push origin main


STEP 3: Create a PR to Test
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Create a test PR in baccarat_simulator with code changes.
The agent will automatically review it and post comments!


================================================================================
ğŸ“ FILE LOCATIONS
================================================================================

In pr-review-agent repo:
  â”œâ”€â”€ .github/
  â”‚   â””â”€â”€ workflows/
  â”‚       â””â”€â”€ code-review-agent.yml          â† THE AGENT (reusable)
  â”œâ”€â”€ CODE_REVIEW_AGENT_USAGE.yml            â† Example caller
  â””â”€â”€ CODE_REVIEW_AGENT_SETUP.txt            â† This file

In any other repo (e.g., baccarat_simulator):
  â””â”€â”€ .github/
      â””â”€â”€ workflows/
          â””â”€â”€ code-review.yml                â† Caller workflow

================================================================================
âš™ï¸ CONFIGURATION OPTIONS
================================================================================

In your caller workflow (.github/workflows/code-review.yml):

Option 1: Language
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
with:
  language: 'java'

Options: 'java', 'python', 'javascript', 'typescript', 'go', 'rust'


Option 2: Severity Level
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
with:
  severity: 'error'  # Only report critical issues
  severity: 'warning'  # Report warnings + errors (default)
  severity: 'info'  # Report all issues including info


Option 3: Full Configuration
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
with:
  language: 'java'
  severity: 'warning'


================================================================================
ğŸ” WHAT THE AGENT ANALYZES
================================================================================

FOR JAVA FILES:
  âœ“ 78 advanced code quality rules
  âœ“ Concurrency & thread safety issues
  âœ“ Memory management problems
  âœ“ Security vulnerabilities
  âœ“ Design pattern violations
  âœ“ And 48 more advanced rules!

FOR PYTHON FILES:
  âœ“ PEP 8 style violations
  âœ“ Import errors
  âœ“ Code complexity
  âœ“ Security issues

FOR JAVASCRIPT FILES:
  âœ“ ES6+ best practices
  âœ“ Async/await patterns
  âœ“ Error handling
  âœ“ Performance issues

================================================================================
ğŸ’¬ EXAMPLE PR COMMENT
================================================================================

When the agent reviews a PR, it posts a comment like:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¤– Automated Code Review                                             â”‚
â”‚                                                                      â”‚
â”‚ Language: java                                                       â”‚
â”‚ Severity Level: warning                                              â”‚
â”‚ Review Date: 2025-12-10 14:32:15 UTC                                â”‚
â”‚                                                                      â”‚
â”‚ Files Analyzed:                                                      â”‚
â”‚ - src/main/java/com/example/Game.java                               â”‚
â”‚ - src/main/java/com/example/Player.java                             â”‚
â”‚                                                                      â”‚
â”‚ Issues Found:                                                        â”‚
â”‚                                                                      â”‚
â”‚ âš ï¸ Game.java (line 42):                                              â”‚
â”‚    Potential null pointer dereference                               â”‚
â”‚                                                                      â”‚
â”‚ âœ“ Player.java:                                                       â”‚
â”‚   No issues detected                                                â”‚
â”‚                                                                      â”‚
â”‚ Summary: 1 warning found, 0 errors                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Developers can then click the file/line to see the exact issue!

================================================================================
ğŸ”§ ADVANCED SETUP (Multiple Languages)
================================================================================

If your repo has MULTIPLE languages (Java + Python):

name: Code Review Agent (Multi-Language)

on:
  pull_request:
    types: [opened, synchronize, reopened]

jobs:
  java-review:
    uses: bsimulator/pr-review-agent/.github/workflows/code-review-agent.yml@main
    with:
      language: 'java'
      severity: 'error'

  python-review:
    uses: bsimulator/pr-review-agent/.github/workflows/code-review-agent.yml@main
    with:
      language: 'python'
      severity: 'warning'

Both will run in parallel and post separate review comments!

================================================================================
ğŸ“Š EXPECTED TIMELINE
================================================================================

Time    | Event
--------|â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
0:00    | You create PR on GitHub
0:05    | GitHub Actions triggers automatically
0:10    | Agent starts analyzing code
0:20    | Agent posts review comment
0:30    | Check status updated (pass/fail)
0:45    | You see feedback on PR page

Total: ~45 seconds from PR creation to review posted!

================================================================================
âœ… CHECKLIST - DEPLOYING THE AGENT
================================================================================

Agent Setup (in pr-review-agent repo):
  âœ… Create .github/workflows/code-review-agent.yml
  âœ… Commit and push
  âœ… Verify workflow is visible in GitHub Actions tab

Caller Setup (in baccarat_simulator):
  â˜ Create .github/workflows/code-review.yml
  â˜ Copy caller configuration from CODE_REVIEW_AGENT_USAGE.yml
  â˜ Update language setting if needed
  â˜ Commit and push

Testing:
  â˜ Create test PR in baccarat_simulator
  â˜ Make a code change (add new file or modify)
  â˜ Push to test branch
  â˜ Create PR from GitHub web interface
  â˜ Wait 30-60 seconds
  â˜ See review comment appear automatically âœ¨

================================================================================
ğŸ› TROUBLESHOOTING
================================================================================

Problem 1: Workflow doesn't run
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â€¢ Check: .github/workflows/code-review.yml exists
  â€¢ Check: File is in correct repo (baccarat_simulator)
  â€¢ Check: PR has actual code changes
  â€¢ Solution: Manually trigger from GitHub Actions tab

Problem 2: Agent repo not found
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â€¢ Check: Repository is 'bsimulator/pr-review-agent'
  â€¢ Check: Branch is 'main'
  â€¢ Check: Your user has access to the repo
  â€¢ Solution: Use full path: bsimulator/pr-review-agent

Problem 3: No comments posted
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â€¢ Check: GITHUB_TOKEN permission is set
  â€¢ Check: Workflow completed successfully (green âœ“)
  â€¢ Check: Analyze changed files with correct extension
  â€¢ Solution: Add print statements to debug

Problem 4: Too many comments/spam
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â€¢ Solution: Increase severity level to 'error'
  â€¢ Solution: Filter specific file patterns
  â€¢ Solution: Disable for certain files

================================================================================
ğŸ” PERMISSIONS & SECURITY
================================================================================

The workflow uses GITHUB_TOKEN which:
  âœ… Is automatically provided by GitHub Actions
  âœ… Has permission to read code
  âœ… Has permission to write comments
  âœ… Is scoped to current repo only
  âœ… Expires after workflow completes
  âœ… Never exposes secrets

NO SENSITIVE DATA is sent anywhere:
  â€¢ Code is analyzed locally in GitHub Actions
  â€¢ Results are posted only to YOUR repos
  â€¢ No external API calls (unless you add them)

================================================================================
ğŸ“š USEFUL LINKS
================================================================================

GitHub Actions Docs:
  https://docs.github.com/en/actions

Reusable Workflows:
  https://docs.github.com/en/actions/using-workflows/reusing-workflows

Workflow Syntax:
  https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions

pr-review-agent Repo:
  https://github.com/bsimulator/pr-review-agent

================================================================================
ğŸ’¡ TIPS & TRICKS
================================================================================

Tip 1: Schedule reviews
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Instead of only on PR creation, also review on schedule:

on:
  pull_request:
    types: [opened, synchronize, reopened]
  schedule:
    - cron: '0 9 * * MON'  # Every Monday at 9 AM

Tip 2: Conditional execution
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Only review Java files if they changed:

on:
  pull_request:
    types: [opened, synchronize, reopened]
    paths:
      - '**.java'

Tip 3: Skip review for certain PRs
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Add [skip-review] to PR title to disable agent:

if: !contains(github.event.pull_request.title, '[skip-review]')

Tip 4: Different rules per branch
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Run stricter review for main branch:

with:
  severity: ${{ github.ref == 'refs/heads/main' && 'error' || 'warning' }}

================================================================================
ğŸ“ LEARNING RESOURCES
================================================================================

Want to learn more about GitHub Actions?
  1. Official GitHub Actions docs (link above)
  2. GitHub Actions examples: https://github.com/actions
  3. Community workflows: https://github.com/orgs/actions/repositories

Want to extend the agent?
  1. Edit .github/workflows/code-review-agent.yml
  2. Add new analysis steps
  3. Customize comment format
  4. Add new languages

================================================================================
âœ¨ SUMMARY
================================================================================

You now have:
  âœ… A reusable code review agent in pr-review-agent repo
  âœ… Configuration guide for other repos
  âœ… Example caller workflow
  âœ… Full documentation

Next steps:
  1. Deploy agent to pr-review-agent repo
  2. Add caller to baccarat_simulator repo
  3. Test with a PR
  4. Iterate and improve!

Questions? Check the troubleshooting section above!

================================================================================
Generated: December 10, 2025
Status: âœ… READY TO DEPLOY
================================================================================
